<html>
<head>
</head>

<body>
<script>
function loadJSON(path, success, error)
{
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
                if (success)
                    success(JSON.parse(xhr.responseText));
            } else {
                if (error)
                    error(xhr);
            }
        }
    };
    xhr.open("GET", path, true);
    xhr.send();
}

var titles;
var titlesLength;
var subjectData = []; // create an empty array
function showRandomTitle(subject,color){
  if ((subject in subjectData)==false) {
    document.getElementById("loading").innerHTML = 'Loading...'
    loadJSON(subject+'_title_markov.json',
             function(data) { 
                document.getElementById("loading").innerHTML='<div style="font-size:22pt;min-height:40px;width:100%;" id="title"></div><br\><br\>';
                subjectData[subject]=data;
                showRandom(subject,color);
             },
             function(xhr) { console.error(xhr); }
    );
  } else {
    showRandom(subject,color);
  }
}

function showRandom(subject,color) {
    whichTitle=Math.round(Math.random()*(subjectData[subject].length-1));
    document.getElementById("loading").innerHTML='<div style="word-wrap: break-word;background: #'+color+';font-size:22pt;min-height:40px;width:100%;" id="title"></div><br\><br\>';
    var theDiv = document.getElementById("title");
    theDiv.innerHTML = '<q style="word-wrap: break-word;background: #'+color+';">' + subjectData[subject][whichTitle] + "</q>";    
}
</script>

<center>
<p>
<input style="background: #99dfff;font-size:18pt;height:40px;width:25%;" id="clickMe" type="button" value="Chemistry" onclick="showRandomTitle('chemistry','99dfff');" /><input style="font-size:18pt;height:40px;width:25%;" id="clickMe" type="button" value="Biology" onclick="showRandomTitle('biology');" /><input style="font-size:18pt;height:40px;width:25%;" id="clickMe" type="button" value="Medicine" onclick="showRandomTitle('medicine');" /><input style="font-size:18pt;height:40px;width:25%;" id="clickMe" type="button" value="Pyschology" onclick="showRandomTitle('psychology');" />
</p>
<p>
<input style="font-size:18pt;height:40px;width:25%;" id="clickMe" type="button" value="Economics" onclick="showRandomTitle('economics');" /><input style="font-size:18pt;height:40px;width:25%;" id="clickMe" type="button" value="CS" onclick="showRandomTitle('computerscience');" /><input style="font-size:18pt;height:40px;width:25%;" id="clickMe" type="button" value="Math" onclick="showRandomTitle('math');" /><input style="font-size:18pt;height:40px;width:25%;" id="clickMe" type="button" value="Physics" onclick="showRandomTitle('physics');" />
</p>
<div id='loading'>
</div>
</center>



<!-- My favorites:
The Entropic Cost Of Swimming, Flying, And Running
 -->

 <p>What's in a title? I extracted 12,000 articles with the most citations in the journals Science and Nature (using expression <code>SO=(SCIENCE OR NATURE)</code> in Web of Science, and exported into the Bibtex file <code>top12000.bib</code>).</p>

<p>From these I created a word cloud of the top words and generated a little website to view some Markov-chain related article names. </p>

<p>Look no further for a name for your next Science/Nature paper. </p>

<p>If you'd like to run the code yourself:</p>

<p><pre>
git clone https://github.com/schollz/topscience.git
python3 -m pip install bibtexparser markovify Pillow numpy
python3 run.py
</pre></p>

<center>
<br>
<img src="/flask_words.png"></img>
</center>
</body>


 </html>